<%- include('../partials/header') %>

<!--**********************************
Content body start
***********************************-->

	<div class="content-body">
		<!-- row -->
		<div class="container-fluid">
			<div class="row page-titles">
				<h4>Dashboard</h1>
			</div>
			<div class="row">
				<div class="col-lg-12">
					<div class="card">
						<div class="card-header">
							<h4 class="card-title">All Ticket</h4>
							<!-- hide the button if the user is manager -->
							<% if (user.type === 'athlete' ) { %>
							<a href="/tickets/new" class="btn btn-primary">Add ticket</a>
							<% } %>
						</div>

						<div class="card-body">
							<div class="table-responsive ticket-table">
								<table id="example" class="display dataTablesCard table-responsive-xl"
									style="min-width: 845px">
									<thead>
										<tr>
											<th>Title</th>
											<th>Description</th>
											<th>User</th>
											<th>Category</th>
											<th>Status</th>
											<th>Actions</th>
										</tr>
									</thead>
									<tbody>
										<% allTickets.forEach(function(T) { %>
											<tr>
											  <td><%= T.title %></td>
											  <td><%= T.description %></td>
											  <td><%= T.userName %></td>
											  <td><%= T.category %></td>
											  <td>
												<span class="badge <%= (T.status === 'Open') ? 'badge-dark' : (T.status === 'In Review') ? 'badge-warning' : (T.status === 'Action Needed') ? 'badge-dark' : (T.status === 'Completed') ? 'badge-success' : 'badge-danger' %>"><%= T.status %></span>
											  </td>
											  <td><a href="/tickets/<%= T._id %>">Show Details</a></td>
											</tr>
										<% }) %>
									</tbody>
								</table>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>

<!--**********************************
Content body end
***********************************-->

	<%- include('../partials/footer') %>